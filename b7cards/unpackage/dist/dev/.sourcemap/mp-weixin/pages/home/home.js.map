{"version":3,"file":"home.js","sources":["pages/home/home.vue","../../down load/HBuilderX.4.76.2025082103/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvaG9tZS9ob21lLnZ1ZQ"],"sourcesContent":["<template>\n  <view class=\"container\">\n    <!-- 返回按钮 -->\n    <view class=\"back-button\" @click=\"goBack\">\n      <text class=\"back-text\">← 返回菜单</text>\n    </view>\n    \n\t<button @click=\"SynInformation\" :disabled = \"!canbutton\"> 同步信息 </button>\n\t<button @click=\"gameStart\" :disabled = \"!isConnected && !canbutton\"> 开始游戏 </button>\n    \n    <!-- 出牌权显示 -->\n    <view class=\"turn-section\" v-if=\"gameStatus === 'playing' && currentPlayer\">\n      <view :class=\"['turn-indicator', isYourTurn ? 'your-turn' : 'other-turn']\">\n        <text v-if=\"isYourTurn\" class=\"turn-text\">🎮 轮到您出牌</text>\n        <text v-else class=\"turn-text\">⏳ 轮到玩家 {{ currentPlayer }} 出牌</text>\n      </view>\n    </view>\n    \n    <!-- 牌堆显示 - 只在有牌时显示 -->\n    <view class=\"piles-section\" v-if=\"gamePiles\">\n      <h3>牌堆</h3>\n      <view class=\"piles-container\">\n        <view v-for=\"(pile, suit) in gamePiles\" :key=\"suit\">\n          <!-- 只在有牌时显示牌堆 -->\n          <view v-if=\"pile.cards && pile.cards.length > 0\" class=\"pile-item\">\n            <view class=\"pile\">\n              <!-- 牌堆标题 - 显示花色和牌数 -->\n              <view class=\"pile-header\">\n                <text class=\"pile-suit\">{{ getSuitSymbol(suit) }}</text>\n                <text class=\"pile-count\">{{ pile.count }}张</text>\n              </view>\n              \n              <!-- 牌堆序列 - 横向展开，每张牌完整显示 -->\n              <view class=\"pile-cards\">\n                <view class=\"pile-sequence\">\n                  <view \n                    v-for=\"(entry, index) in pile.cards\" \n                    :key=\"index\"\n                    :class=\"['pile-card', 'card-' + entry.card.suit, entry.card.rank === '7' ? 'seven-card' : '']\"\n                    :style=\"{ marginLeft: index > 0 ? '-20px' : '0' }\"\n                  >\n                    <text class=\"card-rank\">{{ entry.card.rank }}</text>\n                    <text class=\"card-suit\">{{ getSuitSymbol(entry.card.suit) }}</text>\n                  </view>\n                </view>\n              </view>\n              \n              <text v-if=\"pile.playedBy\" class=\"pile-player\">\n                最后出牌: {{ pile.playedBy }}\n              </text>\n            </view>\n          </view>\n        </view>\n      </view>\n    </view>\n    \n    <!-- 玩家列表 -->\n    <view class=\"player-section\">\n      <h3>在线玩家 ({{ playerlist.length }})</h3>\n      <ul>\n        <li v-for=\"(item, index) in playerlist\" :key=\"index\">\n          玩家{{ index+1 }}: {{ item.deviceId || item }}\n        </li>\n      </ul>\n    </view>\n    \n    <!-- 玩家手牌 -->\n    <view class=\"cards-section\" v-if=\"playerCards.length > 0\">\n      <h3>你的手牌 ({{ playerCards.length }}张)</h3>\n      \n      <!-- 选中的牌 -->\n      <view class=\"selected-section\" v-if=\"selectedCard\">\n        <h4>已选牌</h4>\n        <view class=\"selected-cards\">\n          <view class=\"card-item\">\n            <view :class=\"['card', 'card-' + selectedCard.suit, 'selected']\">\n              <text class=\"card-rank\">{{ selectedCard.rank }}</text>\n              <text class=\"card-suit\">{{ getSuitSymbol(selectedCard.suit) }}</text>\n            </view>\n          </view>\n        </view>\n        <view class=\"action-buttons\">\n          <button @click=\"playCard\" class=\"play-btn\">出牌</button>\n          <button @click=\"clearSelection\" class=\"clear-btn\">取消选择</button>\n        </view>\n        \n        <!-- Pass按钮 -->\n        <view class=\"pass-section\" v-if=\"isYourTurn && gameStatus === 'playing'\">\n          <button @click=\"passTurn\" class=\"pass-btn\" :disabled=\"!canPass\">\n            Pass\n          </button>\n          <text v-if=\"!canPass\" class=\"pass-hint\">\n            {{ passHint }}\n          </text>\n        </view>\n      </view>\n      \n      <!-- 所有手牌 -->\n      <view class=\"cards-container\">\n        <view v-for=\"(card, index) in playerCards\" :key=\"index\" class=\"card-item\">\n          <view \n            :class=\"['card', 'card-' + card.suit, selectedCard && selectedCard.id === card.id ? 'selected' : '']\"\n            @click=\"selectCard(card)\"\n          >\n            <text class=\"card-rank\">{{ card.rank }}</text>\n            <text class=\"card-suit\">{{ getSuitSymbol(card.suit) }}</text>\n            <text v-if=\"selectedCard && selectedCard.id === card.id\" class=\"selected-mark\">✓</text>\n          </view>\n        </view>\n      </view>\n    </view>\n    \n  </view>\n</template>\n\n<script>\n\n\nconst app = getApp();\nexport default {\n  \n\tdata(){\n\t\treturn{\n\t\t\tcanbutton : false,\n\t\t\tisConnected : false ,\n\t\t\tplayerlist:[],\n\t\t\tplayerCards: [],\n\t\t\tselectedCard: null, // 选中的单张牌\n\t\t\tgameStatus: 'waiting', // waiting, playing, ended\n\t\t\tgamePiles: {\n\t\t\t\thearts: { suit: 'hearts', count: 0, topCard: null, playedBy: null, cards: [] },\n\t\t\t\tspades: { suit: 'spades', count: 0, topCard: null, playedBy: null, cards: [] },\n\t\t\t\tdiamonds: { suit: 'diamonds', count: 0, topCard: null, playedBy: null, cards: [] },\n\t\t\t\tclubs: { suit: 'clubs', count: 0, topCard: null, playedBy: null, cards: [] }\n\t\t\t},\n\t\t\tcurrentPlayer: null, // 当前出牌玩家\n\t\t\tisYourTurn: false, // 是否轮到当前玩家出牌\n\t\t\tcanPass: false, // 是否可以pass\n\t\t\tpassHint: '' // pass提示信息\n\t\t}\n\t},\n  onLoad(){\n    this.setupWebSocketListener();\n  },\n  methods: {\n    // 返回菜单\n    goBack() {\n      uni.navigateTo({\n        url: '/pages/menu/menu'\n      });\n    },\n    \n    setupWebSocketListener() {\n      if (app.globalData.socketTask && app.globalData.isConnected) {\n\t\t  console.log(\"监听器设置成功\")\n\t\t  this.canbutton = true;\n        // 设置消息监听器\n        app.globalData.socketTask.onMessage((res) => {\n          console.log('Home页面收到WebSocket消息:', res);\n          \n          try {\n            // 解析JSON消息\n            const messageData = JSON.parse(res.data);\n            if(messageData.type == 'syninformation'){\n\t\t\t\tconsole.log(\"进入到同步数组if\")\n              this.playerlist = messageData.content;\n            }\n         //----------分割每一条消息处理\n\t\t //处理开始游戏后的消息处理\n\t\t\tif(messageData.type == 'alert'){\n\t\t\t\tconsole.log(messageData.content)\n\t\t\t\tuni.showToast({\n\t\t\t\t\ttitle:messageData.content,\n\t\t\t\t\ticon:'error',\n\t\t\t\t\tduration:2000\n\t\t\t\t})\n\t\t\t}\n\t\t\tif(messageData.type == \"gameStartRes\"){\n\t\t\t\tconsole.log(\"收到游戏开始响应，手牌信息:\", messageData.content);\n\t\t\t\tthis.playerCards = messageData.content.playerCards || [];\n\t\t\t\tthis.gameStatus = 'playing';\n\t\t\t\tthis.selectedCard = null;\n\t\t\t\t// 初始化牌堆\n\t\t\t\tthis.gamePiles = {\n\t\t\t\t\thearts: { suit: 'hearts', count: 0, topCard: null, playedBy: null, cards: [] },\n\t\t\t\t\tspades: { suit: 'spades', count: 0, topCard: null, playedBy: null, cards: [] },\n\t\t\t\t\tdiamonds: { suit: 'diamonds', count: 0, topCard: null, playedBy: null, cards: [] },\n\t\t\t\t\tclubs: { suit: 'clubs', count: 0, topCard: null, playedBy: null, cards: [] }\n\t\t\t\t};\n\t\t\t\t// 设置当前出牌玩家\n\t\t\t\tthis.currentPlayer = messageData.content.currentPlayer;\n\t\t\t\tthis.isYourTurn = this.currentPlayer === app.globalData.diviceid;\n\t\t\t\t//this.isYourTurn = messageData.content.isYourTurn;\n\t\t\t\t// 检查是否可以Pass\n\t\t\t\tthis.checkCanPass();\n\t\t\t\t\n\t\t\t\tuni.showToast({\n\t\t\t\t\ttitle: `游戏开始！获得${this.playerCards.length}张牌`,\n\t\t\t\t\ticon: 'success',\n\t\t\t\t\tduration: 2000\n\t\t\t\t});\n\t\t\t}\n\t\t\t//------------------------------------------以上经过校对没有问题/待检验\n\t\t\t// 处理牌堆更新消息\n\t\t\tif(messageData.type == \"pileUpdate\"){\n\t\t\t\tconsole.log(\"收到牌堆更新消息:\", messageData.content);\n\t\t\t\tthis.gamePiles = messageData.content.pileInfo;\n\t\t\t\t\n\t\t\t\t// 更新当前出牌玩家\n\t\t\t\tif(messageData.content.currentPlayer) {\n\t\t\t\t\tthis.currentPlayer = messageData.content.currentPlayer;\n\t\t\t\t\tthis.isYourTurn = this.currentPlayer === app.globalData.diviceid;\n\t\t\t\t\t// 检查是否可以Pass\n\t\t\t\t\tthis.checkCanPass();\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t// 更新玩家手牌数量\n\t\t\t\tif(messageData.content.remainingCards !== undefined) {\n\t\t\t\t\t// 如果是当前玩家的出牌，更新手牌\n\t\t\t\t\tif(messageData.content.playedBy === app.globalData.diviceid) {\n\t\t\t\t\t\tthis.playerCards = this.playerCards.filter(card => \n\t\t\t\t\t\t\tcard.id !== messageData.content.playedCard.id\n\t\t\t\t\t\t);\n\t\t\t\t\t\tthis.selectedCard = null;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\t// 处理出牌成功消息\n\t\t\tif(messageData.type == \"playCardSuccess\"){\n\t\t\t\tconsole.log(\"出牌成功:\", messageData.content);\n\t\t\t\tuni.showToast({\n\t\t\t\t\ttitle: messageData.content,\n\t\t\t\t\ticon: 'success',\n\t\t\t\t\tduration: 2000\n\t\t\t\t});\n\t\t\t}\n\t\t\t\n\t\t\t// 处理出牌失败消息\n\t\t\tif(messageData.type == \"playCardFail\"){\n\t\t\t\tconsole.log(\"出牌失败:\", messageData.content);\n\t\t\t\tuni.showToast({\n\t\t\t\t\ttitle: messageData.content,\n\t\t\t\t\ticon: 'error',\n\t\t\t\t\tduration: 2000\n\t\t\t\t});\n\t\t\t}\n\t\t\t\n\t\t\t// 处理Pass成功消息\n\t\t\tif(messageData.type == \"passSuccess\"){\n\t\t\t\tconsole.log(\"Pass成功:\", messageData.content);\n\t\t\t\t\n\t\t\t\t// 更新当前出牌玩家\n\t\t\t\tif(messageData.content.nextPlayer) {\n\t\t\t\t\tthis.currentPlayer = messageData.content.nextPlayer;\n\t\t\t\t\tthis.isYourTurn = this.currentPlayer === app.globalData.diviceid;\n\t\t\t\t\t// 检查是否可以Pass\n\t\t\t\t\tthis.checkCanPass();\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tuni.showToast({\n\t\t\t\t\ttitle: messageData.content.message,\n\t\t\t\t\ticon: 'success',\n\t\t\t\t\tduration: 2000\n\t\t\t\t});\n\t\t\t}\n\t\t\t\n\t\t\t// 处理Pass失败消息\n\t\t\tif(messageData.type == \"passFail\"){\n\t\t\t\tconsole.log(\"Pass失败:\", messageData.content);\n\t\t\t\tuni.showToast({\n\t\t\t\t\ttitle: messageData.content,\n\t\t\t\t\ticon: 'error',\n\t\t\t\t\tduration: 2000\n\t\t\t\t});\n\t\t\t}\n\t\t \n\t\t  } catch (error) {\n            console.error('消息解析失败:', error, '原始数据:', res.data);\n            // 处理非JSON格式消息\n            \n          }\n        });\n        \n        this.isListening = true;\n        console.log('Home页面WebSocket监听器已设置');\n      } else {\n        console.log('WebSocket未连接，无法设置监听器');\n        // 可以设置定时器重试\n        setTimeout(() => {\n          this.setupWebSocketListener();\n        }, 2000);\n      }\n    },\n    SynInformation(){\n\t\tconsole.log(\"是否成功连接\" + app.globalData.isConnected);\n\t\tconsole.log(\"socketTask:\" + app.globalData.socketTask);\n      if (app.globalData.isConnected && app.globalData.socketTask) {\n\t\t\t\t\tconst message = {\n\t\t\t\t\t\ttype: 'system',\n\t\t\t\t\t\treqmethoud : 'syninformation',\n\t\t\t\t\t\tplayerid : app.globalData.diviceid,\n            \n\t\t\t\t\t};\n\t\t\t\t\t\n\t\t\t\t\tapp.globalData.socketTask.send({\n\t\t\t\t\t\tdata: JSON.stringify(message),\n\t\t\t\t\t\tsuccess: () => {\n\t\t\t\t\t\t\t//----------在连接成功的回调中设置监听函数-------------------------\n\t\t\t\t\t\t\tthis.isConnected = true\n\t\t\t\t\t\t\tconsole.log('同步信息成功');\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t},\n\t\t\t\t\t\tfail: (err) => {\n\t\t\t\t\t\t\tconsole.error('同步用户信息失败:', err);\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\ttitle: 'WebSocket未连接',\n\t\t\t\t\t\ticon: 'none'\n\t\t\t\t\t});\n\t\t\t\t}\n    },\n    gameStart(){\n\t\tconst message = {\n\t\t\ttype: 'gameStart',\n\t\t\treqmethoud : 'user',\n\t\t\tplayerid : app.globalData.diviceid,\n\t\t            };\n\t\t\tapp.globalData.socketTask.send({\n\t\t\t\tdata: JSON.stringify(message),\n\t\t\t\tsuccess: () => {\n\t\t\t\t\t//----------在连接成功的回调中设置监听函数-------------------------\n\t\t\t\t\tthis.isConnected = true\n\t\t\t\t\tconsole.log('发送开始游戏请求');\n\t\t\t\t\t\n\t\t\t\t\t\n\t\t\t\t},\n\t\t\t\tfail: (err) => {\n\t\t\t\t\tconsole.error('发送卡开始请求失败:', err);\n\t\t\t\t\t\t\t\n\t\t\t\t}\n\t\t\t});\n\t\t\n\t},\n    getSuitSymbol(suit) {\n      switch(suit) {\n        case 'hearts': return '♥';\n        case 'spades': return '♠';\n        case 'clubs': return '♣';\n        case 'diamonds': return '♦';\n        default: return suit;\n      }\n    },\n    // 选择单张牌\n    selectCard(card) {\n      if (this.selectedCard && this.selectedCard.id === card.id) {\n        // 如果点击的是已选中的牌，则取消选择\n        this.selectedCard = null;\n      } else {\n        // 选择新的牌\n        this.selectedCard = card;\n      }\n    },\n    // 取消选择\n    clearSelection() {\n      this.selectedCard = null;\n    },\n    // 出牌\n    playCard() {\n      if (!this.selectedCard) {\n        uni.showToast({\n          title: '请先选择要出的牌',\n          icon: 'none',\n          duration: 2000\n        });\n        return;\n      }\n      \n      console.log('出牌:', this.selectedCard);\n      \n      // 发送出牌消息到服务器\n      const message = {\n        type: 'playCard',\n        playerid: app.globalData.diviceid,\n        card: this.selectedCard,\n\t\t\n      };\n      \n      app.globalData.socketTask.send({\n        data: JSON.stringify(message),\n        success: () => {\n          console.log('出牌请求发送成功，等待服务器验证');\n          // 不再立即移除手牌，等待服务器确认\n          // 手牌移除和牌堆更新将在收到服务器确认消息后处理\n        },\n        fail: (err) => {\n          console.error('出牌请求发送失败:', err);\n          uni.showToast({\n            title: '出牌请求发送失败',\n            icon: 'none',\n            duration: 2000\n          });\n        }\n      });\n    },\n    \n    // Pass操作\n    passTurn() {\n      if (!this.isYourTurn) {\n        uni.showToast({\n          title: '现在不是你的回合',\n          icon: 'none',\n          duration: 2000\n        });\n        return;\n      }\n      \n      console.log('玩家选择Pass');\n      \n      // 发送Pass消息到服务器\n      const message = {\n        type: 'passTurn',\n        playerid: app.globalData.diviceid\n      };\n      \n      app.globalData.socketTask.send({\n        data: JSON.stringify(message),\n        success: () => {\n          console.log('Pass请求发送成功');\n        },\n        fail: (err) => {\n          console.error('Pass请求发送失败:', err);\n          uni.showToast({\n            title: 'Pass请求发送失败',\n            icon: 'none',\n            duration: 2000\n          });\n        }\n      });\n    },\n    \n    // 检查是否可以Pass\n    checkCanPass() {\n      if (!this.isYourTurn || this.gameStatus !== 'playing') {\n        this.canPass = false;\n        this.passHint = '';\n        return;\n      }\n      // 简化规则：所有玩家都可以Pass\n      this.canPass = true;\n      this.passHint = '可以Pass';\n    },\n    \n    // 简化前端判断，所有规则判断交给后端\n    // goToTest() {\n    //   uni.navigateTo({\n    //     url: '/pages/index/index'\n    //   });\n    // }\n  }\n}\n</script>\n\n<style>\n/* 橙白配色像素风格 */\n.container {\n  padding: 16px;\n  background: linear-gradient(135deg, #fff5e6 0%, #fff 100%);\n  min-height: 100vh;\n  font-family: 'Courier New', monospace;\n}\n\n/* 按钮样式 - 像素风格 */\nbutton {\n  background: #ff8c00;\n  color: white;\n  border: 2px solid #e67300;\n  padding: 12px 24px;\n  border-radius: 4px;\n  font-size: 14px;\n  font-weight: bold;\n  cursor: pointer;\n  transition: all 0.2s ease;\n  box-shadow: 0 4px 0 #cc6600;\n  margin: 8px 4px;\n  font-family: 'Courier New', monospace;\n}\n\nbutton:disabled {\n  background: #ccc;\n  border-color: #999;\n  box-shadow: 0 4px 0 #999;\n  cursor: not-allowed;\n  opacity: 0.6;\n}\n\nbutton:not(:disabled):active {\n  transform: translateY(4px);\n  box-shadow: 0 0 0 #cc6600;\n}\n\n/* 玩家列表样式 */\n.player-section {\n  margin: 16px 0;\n  padding: 16px;\n  background: white;\n  border-radius: 8px;\n  border: 2px solid #ff8c00;\n  box-shadow: 0 4px 0 #e67300;\n}\n\n.player-section h3 {\n  margin-bottom: 12px;\n  color: #ff8c00;\n  font-size: 18px;\n  text-align: center;\n  border-bottom: 2px solid #ff8c00;\n  padding-bottom: 8px;\n}\n\n/* 手牌区域样式 */\n.cards-section {\n  margin: 16px 0;\n  padding: 16px;\n  background: white;\n  border-radius: 8px;\n  border: 2px solid #ff8c00;\n  box-shadow: 0 4px 0 #e67300;\n}\n\n.cards-section h3 {\n  margin-bottom: 16px;\n  color: #ff8c00;\n  font-size: 18px;\n  text-align: center;\n  border-bottom: 2px solid #ff8c00;\n  padding-bottom: 8px;\n}\n\n.cards-container {\n  display: flex;\n  flex-wrap: wrap;\n  gap: 8px;\n  justify-content: center;\n}\n\n.card-item {\n  width: 64px;\n  height: 88px;\n}\n\n/* 卡牌样式 - 像素风格 */\n.card {\n  width: 100%;\n  height: 100%;\n  border: 2px solid #333;\n  border-radius: 6px;\n  background: white;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  position: relative;\n  cursor: pointer;\n  transition: all 0.2s ease;\n  box-shadow: 0 4px 0 #666;\n}\n\n.card.selected {\n  border: 3px solid #ff8c00;\n  background: #fff5e6;\n  transform: translateY(-4px);\n  box-shadow: 0 6px 0 #e67300;\n}\n\n.card-hearts {\n  color: #e74c3c;\n  border-color: #e74c3c;\n}\n\n.card-diamonds {\n  color: #e74c3c;\n  border-color: #e74c3c;\n}\n\n.card-spades {\n  color: #2c3e50;\n  border-color: #2c3e50;\n}\n\n.card-clubs {\n  color: #2c3e50;\n  border-color: #2c3e50;\n}\n\n.card-rank {\n  font-size: 18px;\n  font-weight: bold;\n}\n\n.card-suit {\n  font-size: 24px;\n  margin-top: 4px;\n}\n\n.selected-mark {\n  position: absolute;\n  top: 4px;\n  right: 4px;\n  color: #ff8c00;\n  font-weight: bold;\n  font-size: 14px;\n}\n\n/* 选中牌区域 */\n.selected-section {\n  margin-bottom: 20px;\n  padding: 16px;\n  background: #fff5e6;\n  border-radius: 8px;\n  border: 2px solid #ff8c00;\n  text-align: center;\n}\n\n.selected-section h4 {\n  margin-bottom: 12px;\n  color: #ff8c00;\n  font-size: 16px;\n}\n\n.selected-cards {\n  display: flex;\n  justify-content: center;\n  gap: 12px;\n  margin-bottom: 16px;\n}\n\n.action-buttons {\n  display: flex;\n  justify-content: center;\n  gap: 12px;\n}\n\n.play-btn {\n  background: #4CAF50;\n  border-color: #45a049;\n  box-shadow: 0 4px 0 #3d8b40;\n}\n\n.clear-btn {\n  background: #ff6b6b;\n  border-color: #ff5252;\n  box-shadow: 0 4px 0 #ff3838;\n}\n\n/* Pass按钮样式 */\n.pass-section {\n  margin-top: 16px;\n  padding: 16px;\n  background: #fff5e6;\n  border-radius: 8px;\n  border: 2px solid #ff8c00;\n  text-align: center;\n}\n\n.pass-btn {\n  background: #ff8c00;\n  border-color: #e67300;\n  box-shadow: 0 4px 0 #cc6600;\n  font-size: 16px;\n  padding: 12px 24px;\n}\n\n.pass-hint {\n  display: block;\n  margin-top: 8px;\n  font-size: 12px;\n  color: #ff8c00;\n  font-style: italic;\n}\n\n/* 出牌权显示样式 */\n.turn-section {\n  margin: 16px 0;\n  padding: 16px;\n  border-radius: 8px;\n  text-align: center;\n  background: white;\n  border: 2px solid #ff8c00;\n  box-shadow: 0 4px 0 #e67300;\n}\n\n.turn-indicator {\n  padding: 12px 20px;\n  border-radius: 6px;\n  font-size: 16px;\n  font-weight: bold;\n  transition: all 0.3s ease;\n}\n\n.your-turn {\n  background: #ff8c00;\n  color: white;\n  box-shadow: 0 4px 0 #e67300;\n  animation: pixelPulse 1s infinite;\n}\n\n.other-turn {\n  background: #ffb366;\n  color: #333;\n  box-shadow: 0 4px 0 #e67300;\n}\n\n.turn-text {\n  font-size: 16px;\n}\n\n@keyframes pixelPulse {\n  0%, 100% { transform: scale(1); }\n  50% { transform: scale(1.05); }\n}\n\n/* 牌堆样式 - 只在有牌时显示 */\n.piles-section {\n  margin: 16px 0;\n  padding: 16px;\n  background: white;\n  border-radius: 8px;\n  border: 2px solid #ff8c00;\n  box-shadow: 0 4px 0 #e67300;\n}\n\n.piles-section h3 {\n  margin-bottom: 16px;\n  color: #ff8c00;\n  font-size: 18px;\n  text-align: center;\n  border-bottom: 2px solid #ff8c00;\n  padding-bottom: 8px;\n}\n\n.piles-container {\n  display: flex;\n  flex-direction: row;\n  justify-content: flex-start;\n  gap: 20px;\n  overflow-x: auto;\n  padding: 8px 0;\n  min-height: 120px;\n}\n\n.pile-item {\n  flex-shrink: 0;\n}\n\n.pile {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  padding: 8px;\n}\n\n.pile-hearts {\n  border-color: #e74c3c;\n  background: #ffeaea;\n}\n\n.pile-diamonds {\n  border-color: #e74c3c;\n  background: #ffeaea;\n}\n\n.pile-spades {\n  border-color: #2c3e50;\n  background: #f0f0f0;\n}\n\n.pile-clubs {\n  border-color: #2c3e50;\n  background: #f0f0f0;\n}\n\n.pile-suit {\n  font-size: 24px;\n  font-weight: bold;\n  margin-bottom: 4px;\n}\n\n.pile-count {\n  font-size: 12px;\n  color: #666;\n  margin-bottom: 2px;\n}\n\n.pile-top-card {\n  font-size: 14px;\n  font-weight: bold;\n  margin-bottom: 2px;\n}\n\n.pile-empty {\n  font-size: 12px;\n  color: #999;\n  font-style: italic;\n}\n\n.pile-player {\n  font-size: 10px;\n  color: #888;\n  text-align: center;\n}\n\n/* 牌堆标题样式 */\n.pile-header {\n  text-align: center;\n  margin-bottom: 12px;\n  padding-bottom: 8px;\n  border-bottom: 1px solid #eee;\n}\n\n.pile-suit {\n  font-size: 20px;\n  font-weight: bold;\n  margin-right: 8px;\n}\n\n.pile-count {\n  font-size: 12px;\n  color: #666;\n}\n\n/* 牌堆序列样式 - 斗地主式横向叠放 */\n.pile-cards {\n  width: 100%;\n  min-height: 80px;\n  display: flex;\n  justify-content: flex-start;\n  align-items: flex-start;\n}\n\n.pile-sequence {\n  display: flex;\n  flex-direction: row;\n  align-items: flex-start;\n  min-height: 80px;\n  position: relative;\n}\n\n/* 牌堆中的单张牌样式 */\n.pile-card {\n  width: 50px;\n  height: 70px;\n  border: 2px solid #333;\n  border-radius: 4px;\n  background: white;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  box-shadow: 0 2px 4px rgba(0,0,0,0.1);\n  position: relative;\n  z-index: 1;\n  transition: all 0.3s ease;\n}\n\n.pile-card-hearts {\n  color: #e74c3c;\n  border-color: #e74c3c;\n}\n\n.pile-card-diamonds {\n  color: #e74c3c;\n  border-color: #e74c3c;\n}\n\n.pile-card-spades {\n  color: #2c3e50;\n  border-color: #2c3e50;\n}\n\n.pile-card-clubs {\n  color: #2c3e50;\n  border-color: #2c3e50;\n}\n\n.pile-card .card-rank {\n  font-size: 14px;\n  font-weight: bold;\n}\n\n.pile-card .card-suit {\n  font-size: 18px;\n  margin-top: 2px;\n}\n\n.pile-card.seven-card {\n  background: #ffeb3b;\n  font-weight: bold;\n  border-color: #ff8c00;\n  box-shadow: 0 4px 8px rgba(255, 140, 0, 0.3);\n  z-index: 10;\n}\n\n/* 空牌堆样式 */\n.pile-empty {\n  font-size: 14px;\n  color: #999;\n  font-style: italic;\n  text-align: center;\n  margin-top: 30px;\n}\n\n/* 最后出牌者信息 */\n.pile-player {\n  font-size: 10px;\n  color: #888;\n  text-align: center;\n  margin-top: 8px;\n}\n\n/* 列表样式 */\nul {\n  list-style-type: none;\n  padding: 0;\n}\n\nli {\n  padding: 6px 0;\n  border-bottom: 1px solid #eee;\n  text-align: center;\n}\n\n/* 返回按钮样式 */\n.back-button {\n  position: absolute;\n  top: 20px;\n  left: 20px;\n  background: rgba(255, 255, 255, 0.9);\n  border: 2px solid #ff8c00;\n  border-radius: 6px;\n  padding: 8px 16px;\n  cursor: pointer;\n  transition: all 0.3s ease;\n  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);\n  z-index: 10;\n}\n\n.back-button:active {\n  transform: translateY(1px);\n  box-shadow: 0 1px 2px rgba(0, 0, 0, 0.2);\n}\n\n.back-text {\n  font-size: 14px;\n  font-weight: bold;\n  color: #ff8c00;\n  font-family: 'Courier New', monospace;\n}\n\n/* 响应式设计 */\n@media (max-width: 768px) {\n  .container {\n    padding: 12px;\n  }\n  \n  .piles-container {\n    grid-template-columns: 1fr;\n  }\n  \n  .card-item {\n    width: 56px;\n    height: 80px;\n  }\n  \n  .back-button {\n    top: 10px;\n    left: 10px;\n    padding: 6px 12px;\n  }\n  \n  .back-text {\n    font-size: 12px;\n  }\n}\n</style>","import MiniProgramPage from 'E:/mino7/b7cards/pages/home/home.vue'\nwx.createPage(MiniProgramPage)"],"names":["uni"],"mappings":"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"}